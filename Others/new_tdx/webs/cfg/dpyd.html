<!DOCTYPE html><html class=""><head><meta charset="utf-8"><title>大盘异动</title><meta name="renderer" content="webkit"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="styleSheet" href="layui/css/layui.css"><style>*{font-family:"微软雅黑"}::-webkit-scrollbar{width:8px;height:1px}::-webkit-scrollbar-thumb{border-radius:0;background:#fff}::-webkit-scrollbar-track{border-radius:0;background:#fff}.scrollbox:hover::-webkit-scrollbar-thumb{border-radius:0;background:#ddd}body,html{border:none;padding-right:0}[v-cloak]{display:none}.main .layui-col-xs6{height:400px;overflow:auto}.left{border-right:#ccc solid 1px}.layui-timeline-item{padding-top:0;padding-bottom:4px}.layui-timeline-title{margin-bottom:4px;font-size:14px!important;font-weight:700!important}.layui-text{line-height:21px;color:#000!important;font-size:14px!important}.layui-timeline{margin:8px}.layui-timeline-item.item-block-2 .layui-timeline-title .h-inner{color:#379637}.layui-timeline-item.item-block-1 .layui-timeline-title .h-inner{color:#fa4141}.raise-up{color:#fa4141}.raise-down{color:#379637}.layui-table[lay-size=sm] td,.layui-table[lay-size=sm] th{padding:2px;font-size:14px}.layui-timeline-axis{color:#666;font-size:14px!important;font-style:normal;line-height:20px;padding-left:0;left:-10px;border-radius:0;border-top:#fff solid 2px;border-bottom:#fff solid 3px}.layui-timeline-axis *{font-weight:400!important}.item-code,.item-name{padding-right:5px}.layui-timeline-content{padding-left:28px}.layui-timeline-content .inner{padding-left:8px}.globle-item td{font-size:14px!important;padding:1px!important}.main{margin-top:-2px}.header{background:#eee;position:fixed;left:0;top:0;width:100%;z-index:1000;line-height:26px;border-bottom:#ccc solid 1px}#app{padding-top:29px}.header .layui-col-xs6{padding-left:5px;border-right:#ccc solid 1px}.jumpCode{color:#000!important;text-decoration:none;font-size:14px}a.s999{color:#000}a.jumpCode:hover{text-decoration:none}a.s999:hover{text-decoration:none}.floatRight{float:right;margin-right:12px}.bigTitle{font-size:14px;font-weight:700;color:#666}.h-right{border-right:none}html .globle-item.selected .layui-timeline-axis{color:#fa4141}html tr.globle-item.selected td:first-child{color:#fa4141}.tuTableBox{overflow:hidden;overflow-y:auto;border-bottom:#ccc solid 1px}.jituTableBox{overflow:hidden;overflow-y:auto;margin-top:0}.jituTable,.tuTable{margin-top:0;margin-bottom:0}td.text-right{text-align:right}.datatable{width:255px}.h-right .bigTitle{display:inline-block;padding-left:5px;padding-right:5px;cursor:pointer}.bigTitle.selBigTitle{color:red;border-bottom:red solid 1px}#jtTips{font-size:12px;height:20px;line-height:20px;text-align:center;overflow:hidden;border-top:#ccc solid 1px}#jtTips_cont{position:fixed;left:40px;right:40px;bottom:30px;background:#333;padding:8px;border:#ccc solid 0;font-size:14px;color:#fff;text-align:left;z-index:1000;display:none}#jtTipsA:hover #jtTips_cont{display:block}.btn.btn-add{color:red;margin-right:10px;font-weight:700}.btn.btn-add:hover{color:#f22}#addMenus{display:none;position:fixed;left:275px;bottom:30px;background:#333;border:#ccc solid 1px;color:#fff;z-index:1000}#addMenus li{padding:8px;text-align:left;border-bottom:#666 solid 1px}#addMenus li a{font-size:12px;font-family:微软雅黑;color:#fff}#addMenus li a:hover{color:#ffaa25}</style><script>function urlparam(n){var a=new RegExp("(^|&)"+n+"=([^&]*)(&|$)"),r=window.location.search.substr(1).match(a);return null!=r?unescape(r[2]):null}</script></head><body><div id="app"><div class="layui-row header"><div class="layui-col-xs6" v-cloak><span class="bigTitle">板块攻击图</span> <a href="javascript:;" class="s999 floatRight" @mousedown="jumpStock(1,'999999')">切换至大盘</a></div><div class="layui-col-xs6 h-right" v-cloak><span class="bigTitle" v-for="item in rightTab" v-html="item.title1" :class="{selBigTitle:item==curSelItem}" @click="clickBigTitle(item)"></span></div></div><div class="layui-row main"><div class="layui-col-xs6 left scrollbox" v-cloak><div v-if="leftData && leftData.length==0" class="layui-word-aux" v-cloak>没有板块异动数据</div><ul class="layui-timeline"><li class="layui-timeline-item globle-item" jq-direct="left" :id="'item_'+item.d[0]" v-for="item in leftData" :class="'item-block-'+item.rasieFlag" onmousedown="selBlock(this)" v-cloak><i class="layui-timeline-axis"><b>{{item.d[2]}}</b></i><div class="layui-timeline-content layui-text"><div class="inner"><h3 class="layui-timeline-title" v-cloak>{{item.d[3]}} <span class="h-inner">{{item.tag}} {{item.d[5]}}%</span></h3><p v-for="s in item.stocks" v-cloak class="block-item-text"><span><span @mousedown="jumpStock(s.market,s.code)"><a href="javascript:;" class="item-code jumpCode">{{s.code}}</a> <a href="javascript:;" class="item-name jumpCode">{{s.name}}</a> </span><span class="item-raise" :class="'raise-'+s.raise_flag">{{s.raise}}%</span></span></p></div></div></li><li class="layui-timeline-item" v-if="leftData && leftData.length>0" v-cloak><div class="layui-timeline-content layui-text">&nbsp;</div></li></ul></div><div class="layui-col-xs6 right"><div class="tuTableBox scrollbox" v-cloak><div v-if="tuData && tuData.length==0" class="layui-word-aux" v-cloak>没有突信号</div><table class="layui-table tuTable datatable" lay-size="sm" lay-skin="nob" v-else><colgroup><col width="48"><col width="65"><col width="75"><col width="25"><col width="50"></colgroup><tbody><tr v-for="item in tuData" v-show="item.flag==curSelItem.flag[0]" :classid="item.flag" v-cloak class="globle-item" :id="'item_'+item.d[0]" onmousedown="selBlock(this)"><td>{{item.d[2]}} <span jq-direct="right"></span></td><td @mousedown="jumpStock(item.d[6],item.d[7])"><a class="jumpCode" href="javascript:;">{{item.d[7]}}</a></td><td @mousedown="jumpStock(item.d[6],item.d[7])"><a class="jumpCode" href="javascript:;">{{item.d[8]}}</a></td><td>{{item.d[4]}}</td><td class="text-right">{{item.d[5]}}</td></tr></tbody></table></div><h3 v-cloak><!--<span class="bigTitle bigTitle2"
              v-for="item in rightTab" v-html="curActiveTitle2"></span>
            --></h3><div class="jituTableBox scrollbox" v-cloak><div v-if="rightData && rightData.length==0" class="layui-word-aux" v-cloak>没有积信号</div><table class="layui-table jituTable datatable" lay-size="sm" lay-skin="nob" v-else><colgroup><col width="48"><col width="65"><col width="75"><col width="25"><col width="50"></colgroup><tbody><tr v-for="item in rightData" v-show="item.flag==curSelItem.flag[1]" :classid="item.flag" v-cloak class="globle-item" :id="'item_'+item.d[0]" onmousedown="selBlock(this)"><td>{{item.d[2]}} <span jq-direct="right"></span></td><td @mousedown="jumpStock(item.d[6],item.d[7])"><a class="jumpCode" href="javascript:;">{{item.d[7]}}</a></td><td @mousedown="jumpStock(item.d[6],item.d[7])"><a class="jumpCode" href="javascript:;">{{item.d[8]}}</a></td><td>{{item.d[4]}}</td><td class="text-right">{{item.d[5]}}</td></tr></tbody></table></div><ul id="addMenus"><li v-for="item in menus"><a v-html="item.title" href="#" @click="add_to_block(item)"></a></li><li style="position:absolute;left:-10000px"><input type="text" id="focus"></li></ul><div id="jtTips" v-cloak><a href="#" class="btn btn-add" id="add_block_btn">+加入板块</a> 什么是个股积突信号？ <a href="#" id="jtTipsA">查看说明 <span id="jtTips_cont">开盘一段时间且离收盘还有一段时间，连续分钟数内成交量上扬，分时成交均价上扬，现价创新高， 且涨幅在一定范围(保证既已经上涨且还有继续上涨的空间)，振幅和涨速满足一定条件， 即记录为"积"信号；在满足"积"信号的情况下，再次满足上述条件，即为"突"信号。</span></a></div></div></div></div><script src="../jquery-1.7.2.min.js"></script><script src="./layui/layui.all.js"></script><script src="../js/vue.js"></script><script>!function(){var t=document;t.onselectstart=function(){return!!/(input|textarea)/i.test(window.event.srcElement.nodeName)},t.ondragstart=function(){return!1},t.oncopy=function(){t.selection.empty()},t.onkeydown=function(t){if(116==(t=t||window.event).keyCode)return!1}}(),window.onerror=function(t,e,n,i){},gId=urlparam("id"),gRightTab=[{title1:"积突信号",flag:[2,1]},{title1:"120天新高低",flag:[51,52]},{title1:"破120天均线",flag:[53,54]}],gAddMenu=[{title:"加“突信号”入板块",flag:2},{title:"加“积信号”入板块",flag:1},{title:"加“创120天新高”入板块",flag:51},{title:"加“创120天新低”入板块",flag:52},{title:"加“上穿破120天均线”入板块",flag:53},{title:"加“下穿破120天均线”入板块",flag:54}],resizeMain=function(){var t=$(window).height()-31,e=t/2,n=t-e;e-=2,$(".main .layui-col-xs6").height(t),$(".tuTableBox").height(e-20),$(".jituTableBox").height(n-0)},selBlock=function(t){$(".globle-item").removeClass("selected"),$(t).addClass("selected")},getTabById=function(t){for(var e=null,n=0;n<gRightTab.length;n++){var i=gRightTab[n];if(i.flag[0]==t||i.flag[1]==t){e=i;break}}return e},_onSuccess=function(t){if(/^\[\[.*\]\]$/.test(t)){var e=(t=t.replace(/(\[\[|\]\])/g,"")).split("],["),c=[],l=[],s=[];e.map(function(t){if(!((t=t.split(",")).length<3)){var e=t[2];if(t[2]=formatTime(t[2]),/^[0-9]+$/.test(t[1])&&0<=t[1]-3&&t[1]-50<=0){for(var n=[],i=6;i<t.length;i+=4){var a="normal";try{0<1*t[i+3]?a="up":1*t[i+3]<0&&(a="down")}catch(t){}n.push({market:t[i],code:t[i+1],name:t[i+2],raise:t[i+3],raise_flag:a})}var o=t[4];0==o.length&&(o="[ "+t[1]+" ]");var r=0;if(/^[0-9\.\-]+$/.test(t[5]))try{var u=parseFloat(t[5]);r=0<u?1:u<0?2:0}catch(t){r=0}c.push({d:t,stocks:n,time:e,tag:o,rasieFlag:r})}else/^(2|51|53)$/.test(t[1])?s.push({flag:t[1],d:t,time:e}):/^(1|52|54)$/.test(t[1])&&l.push({flag:t[1],d:t,time:e})}}),c.sort(function(t,e){return e.time-t.time}),l.sort(function(t,e){return e.time-t.time}),s.sort(function(t,e){return e.time-t.time}),gVm=new Vue({el:"#app",methods:{jumpStock:function(t,e){window.TDXQuery&&(window.location.href="http://www.treeid/tozst_"+t+"#"+e)},clickBigTitle:function(t){this.curSelItem=t},add_to_block:function(e){window.event.stopPropagation(),$("#addMenus").hide();try{var t=this.tuData.concat(this.rightData),n=[];if(t.map(function(t){e.flag==t.flag&&n.push(t.d[6]+"#"+t.d[7])}),0==n.length)return void layer.msg("没有可添加数据！");var i=n.join("|");addToBlock(i)}catch(t){}}},data:{curSelItem:gRightTab[0],leftData:c,rightData:l,tuData:s,rightTab:gRightTab,menus:gAddMenu},mounted:function(){$("#add_block_btn").click(function(){window.event.stopPropagation(),$("#addMenus").show()}),$(document).click(function(){$("#addMenus").hide()});var t=gId;if(/^\d+$/.test(t)){var e=$("#item_"+t),n=(e.offset().top,e.attr("jq-direct"),e.attr("classId"));null!=n&&(this.curSelItem=getTabById(n)),selBlock($("#item_"+t)[0]);try{e[0].scrollIntoView()}catch(t){}}}})}},resizeMain(),window.onresize=function(){resizeMain()},formatTime=function(t){if(/^\d{3,4}$/.test(t+="")){if(3==t.length)return"0"+t.substr(0,1)+":"+t.substr(1,2);if(4==t.length)return t.substr(0,2)+":"+t.substr(2,2)}return t},addToBlock=function(t){var e=JSON.stringify({Method:"AddToBlock",FuncName:"",Param:t});window.TDXQuery&&window.TDXQuery({request:e,onSuccess:function(t){},onFailure:function(t,e){}})},getData=function(){var t=JSON.stringify({Method:"SYS_FUNCData",FuncName:"",Param:"14|1001"});window.TDXQuery&&window.TDXQuery({request:t,onSuccess:function(t){_onSuccess(t)},onFailure:function(t,e){}})},getData()</script></body></html>