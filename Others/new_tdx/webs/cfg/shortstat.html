<!DOCTYPE html><html><head><meta charset="utf-8"><title>短线宝_统计</title><link rel="styleSheet" href="../css/awesome.css"><script>window.OnNewPxLimitData=function(){},f_get_request=function(){var t=location.search,s=new Object;if(-1!=t.indexOf("?")){var r=t.substr(1);strs=r.split("&");for(var e=0;e<strs.length;e++)s[strs[e].split("=")[0]]=unescape(strs[e].split("=")[1])}return s},gUrlParams=f_get_request()</script><style>*{margin:0;padding:0;font-size:14px;font-family:"微软雅黑";cursor:default}::-webkit-scrollbar{width:0}[v-cloak]{display:none!important}body,html{overflow:hidden}#app_inner{overflow:hidden;overflow-y:auto}#app{overflow:hidden}.datatable{width:100%;border-collapse:collapse;border-spacing:0;table-layout:fixed}.datatable th{font-size:12px;height:21px;font-family:arial;font-weight:400;cursor:default}.datatable th:first-child{border-left:none!important}.datatable th{text-align:center;position:relative}.datatable td{text-align:center;padding-bottom:2px}.long-name{display:block;width:80px;overflow:hidden;white-space:nowrap}.datatable td.text-left,.datatable th.text-left{text-align:left;padding-left:3px}.datatable td.text-center,.datatable th.text-center{text-align:center}.datatable td.text-right,.datatable th.text-right{text-align:right;padding-right:3px}.sort-arr{position:absolute;right:-4px;top:4px;color:#ff3c3c;font-family:宋体;font-size:12px}tr.hasListMore td{color:#ff3c3c}tr.tr_folder td{background:#222;color:#fff;text-align:left;padding-left:2px}.tsinfo{position:fixed;left:0;right:0;padding:4px;font-size:12px;bottom:0;text-align:center;border-radius:10px;z-index:200}.hide{display:none}#filter_name{margin-left:18px;width:39px;height:15px;outline:0;font-size:12px;line-height:15px;padding-right:11px;font-family:宋体;padding-left:2px}th.search-th{position:relative;padding:0!important}.search-th .clear-text{position:absolute;right:4px;top:4px;z-index:2000;font-family:Arial,Helvetica,sans-serif;font-size:12px;cursor:pointer}.search-th .search-text{position:absolute;left:4px;top:1px;z-index:2000;font-size:12px;cursor:pointer}.muti-class{text-align:left;margin-bottom:4px;white-space:nowrap;width:289px;text-overflow:ellipsis;overflow:hidden}.muti_caption{border-bottom:maroon solid 1px;text-align:left;padding-left:3px;height:21px;overflow:hidden}.muti-class *{font-family:宋体;font-size:10px}.muti-class label{position:relative;margin-top:0}.muti-class label.tab-check{color:#ff0}.muti-class label .muti-check span{font-size:12px;font-weight:700;font-family:黑体;display:block;margin-left:-3px;margin-top:0}.long-name{position:relative}.long-name.long-name-check{color:#ff3c3c}.long-name .item-checkbox{position:absolute;left:0;top:5px;display:block;width:9px;height:9px;background:#fff;border:#999 solid 1px;color:#000;text-align:left;line-height:9px;border-radius:1px}.long-name .item-checkbox span{font-size:12px;font-weight:700;font-family:黑体;display:block;margin-left:-3px;margin-top:1px;color:red}.muti_body .long-name{padding-left:15px}#mutiSelTips{position:fixed;left:10px;max-width:255px;top:30px;z-index:10000;background:rgba(255,255,255,.9);border:#ccc solid 1px;color:#000;font-size:14px;line-height:20px;padding:8px;font-family:微软雅黑;border-radius:2px}#deepFilterTips{position:fixed;left:10px;max-width:255px;text-align:center;top:60px;z-index:10000;background:rgba(255,255,255,.9);border:#ccc solid 1px;color:#000;font-size:14px;line-height:20px;padding:8px;font-family:微软雅黑;border-radius:2px}#pic_view{position:fixed;left:0;top:24px;right:0;bottom:0;overflow:auto;z-index:1000;padding:4px}html.blackStyle,html.blackStyle body{background:#000;color:#aaa}html.blackStyle{border-left:maroon solid 1px}html.blackStyle .muti_caption{border-bottom:maroon solid 1px}html.blackStyle .datatable th{color:#aaa;border-left:maroon solid 1px;border-bottom:maroon solid 1px}html.blackStyle .datatable tr td{border-bottom:#13161b solid 1px}html.blackStyle .datatable tr td:first-child{color:#e6e6e6}html.blackStyle .datatable.tb1 tr td:nth-child(2){color:#ff3c3c}html.blackStyle .datatable.tb1 tr td:nth-child(6){color:#0f0}html.blackStyle .datatable tr.selected td{border-bottom-color:#bebe00}html.blackStyle .datatable.tb2 th{border-top:maroon solid 1px}html.blackStyle .datatable tr.tr-total td{border-bottom:maroon dashed 1px;padding-bottom:0}html.blackStyle .tsinfo{background:rgba(0,0,0,.8);color:#fff}html.blackStyle tr.tr_folder td{background:#222;color:#fff}html.blackStyle .jumpcode_color_1{color:#ff3c3c}html.blackStyle .jumpcode_color_3{color:#ff0}html.blackStyle .muti-class label.tab-check{color:#ff3c3c}html.whiteStyle,html.whiteStyle body{background:#fff;color:#000}html.whiteStyle{border-left:silver solid 1px}html.whiteStyle .muti_caption{border-bottom:silver solid 1px}html.whiteStyle .datatable th{color:#000;border-left:silver solid 1px;border-bottom:silver solid 1px}html.whiteStyle .datatable tr td{border-bottom:#fff solid 1px}html.whiteStyle .datatable tr.selected td{border-bottom-color:#0079d5}html.whiteStyle .datatable.tb2 th{border-top:silver solid 1px}html.whiteStyle .datatable.tb1 tr td:nth-child(2){color:#fa4141}html.whiteStyle .datatable.tb1 tr td:nth-child(6){color:#379637}html.whiteStyle .datatable tr.tr-total td{border-bottom:silver dashed 1px;padding-bottom:0}html.whiteStyle .tsinfo{background:rgba(255,255,255,.8);color:#000}html.whiteStyle tr.tr_folder td{background:#eee;color:#666}html.whiteStyle .jumpcode_color_1{color:#ff3c3c}html.whiteStyle .jumpcode_color_3{color:#999}html.blackStyle #filter_name{border:#444 solid 0;background:#000!important;color:#fff}html.whiteStyle #filter_name{border:#ddd solid 0;background:#fff!important;color:#000}html.whiteStyle ::-webkit-input-placeholder{color:#000}html.blackStyle ::-webkit-input-placeholder{color:#ccc}html.whiteStyle .muti-class label.tab-check{color:#ff3c3c}rect{fill:#333}html.blackStyle rect{fill:#333}html.whiteStyle rect{fill:#ddd}.deep-filter{position:relative}.deep-filter .deep-filter-hand{position:absolute;right:0;top:4px;font-size:6px;font-family:宋体;display:block;text-align:center;color:silver;width:12px;height:12px}html.whiteStyle .deep-filter .deep-filter-hand{color:#000}.min-size{font-size:12px;display:inline-block;padding-bottom:5px}</style></head><body _oncontextmenu="self.event.returnValue=false" onselectstart="return!1"><div id="app"><div id="mutiSelTips" v-html="selMutis" v-if="showSelTips" v-cloak></div><div id="deepFilterTips" v-if="showDeepTips" v-cloak v-html="inDeep?'切换到全部统计':'切换到热点统计'"></div><div id="app_inner" v-cloak><table class="datatable tb1"><caption class="muti_caption" v-cloak><div class="muti-class" id="muti_class"><label @mousedown="click_tab(0)" :class="{'tab-check':tabIndex==0}">主题统计</label> <label @mousedown="click_tab(1)" :class="{'tab-check':tabIndex==1}">主题叠加</label> <label @mousedown="click_tab(2)" :class="{'tab-check':tabIndex==2}">涨停图览</label> <span><span class="muti_sel_tips"></span><span class="sel_muti_span" v-if="muti_class" v-html="selMutis.length==0?'请选择需要叠加的主题':selMutis"></span></span></div></caption><thead v-cloak v-if="tabIndex!=2"><tr><th width="70" _click="sort('name')" class="text-left search-th" _onclick="window.location.reload()"><input v-cloak id="filter_name" v-model="filterName" type="text" @focus="focus_search()" @keyup.enter="gotosearch()" placeholder="搜主题"> <span class="clear-text" v-if="filterName.length>0" @click="filterName='';" v-cloak>&times;</span> <span class="search-text" v-cloak><i class="fa fa-search"></i></span></th><th width="48" @mousedown="sort('total')" class="sort_col">涨停数 <span class="sort-arr" v-cloak>{{order_feild=='total'?(order_flag?'↓':'↑'):''}}</span></th><th width="34" @mousedown="sort('zt')" class="sort_col">封涨 <span class="sort-arr" v-cloak>{{order_feild=='zt'?(order_flag?'↓':'↑'):''}}</span></th><th width="34" @mousedown="sort('kb')" class="sort_col">开板 <span class="sort-arr" v-cloak>{{order_feild=='kb'?(order_flag?'↓':'↑'):''}}</span></th><th width="48" @mousedown="sort('zt_')" class="sort_col">封板率 <span class="sort-arr" v-cloak>{{order_feild=='zt_'?(order_flag?'↓':'↑'):''}}</span></th><th width="48" @mousedown="sort('total2')" class="sort_col">跌停数 <span class="sort-arr" v-cloak>{{order_feild=='total2'?(order_flag?'↓':'↑'):''}}</span></th></tr></thead><tbody v-if="list.length>0 && tabIndex!=2" :class="{muti_body:muti_class}" v-cloak><tr v-if="list.length>0 && totalStat!=null && totalStat.data && totalStat.data.total>0" @click="showZtDetail(totalStat,'999999','tr')" :class="{selected:selectedItemKey=='tr_'+totalStat.name}" class="tr-total" v-cloak><td class="text-left deep-filter"><span v-html="totalStatProxy.name"></span><span class="deep-filter-hand" :class="{'indeep':inDeep}" @mouseover="showDeepTips=true" @mouseout="showDeepTips=false" @click="deepFilter()"> <i v-if="inDeep" class="fa fa-dot-circle-o"></i> <i v-else class="fa fa-circle-o"></i></span></td><td class="text-right">{{totalStatProxy.data.total}}</td><td class="text-right">{{totalStatProxy.data.zt}}</td><td class="text-right">{{totalStatProxy.data.kb}}</td><td class="text-right">{{totalStatProxy.data.zt_}}</td><td class="text-right">{{totalStatProxy.data.total2}}</td></tr><tr v-for="item,index in list" class="data-item" @mousedown="showZtDetail(item,index,'tr')" :id="'tr_'+index" :class="{selected:selectedItemKey=='tr_'+item.name,muti_sel:item.checked}" v-cloak v-if="filterNameFn(item)"><td class="text-left"><span :style="itemNameStyle(item)" class="long-name" :class="item.checked?'long-name-check':''"><span class="item-checkbox" v-if="muti_class"><span v-if="item.checked">&radic;</span></span> {{item.name}}</span></td><td class="text-right">{{parseZero(item.data.total.length)}}</td><td class="text-right">{{item.data.zt.length}}</td><td class="text-right">{{item.data.kb.length}}</td><td class="text-right">{{item.data.zt_}}</td><td class="text-right">{{item.data.total2.length}}</td></tr></tbody></table><div v-show="tabIndex==2" id="pic_view" v-cloak></div><div class="tsinfo" style="display:none">鼠标向上拖动查看更多</div><a href="javascript:;" id="aTreeId" style="display:none"></a></div></div><script src="../jquery-1.7.2.min.js"></script><script src="../js/vue.js"></script><script src="../js/d3.js"></script><script src="../js/py.js"></script><script>window.onerror=function(t,e,a,n,r){alert([t,e,a,n,r])};var gUrl=window.location.href,gAllowMaxSel=8,gPicMaxTop=6,gZhutiSlice=2,gFirstEnter=!0,gClassName=1==gUrlParams.color?"whiteStyle":"blackStyle";document.documentElement.className=gClassName,/^[a-z0-9]{6}$/i.test(gUrlParams.bkcolor)&&$("html,body").css("background-color","#"+gUrlParams.bkcolor);var gInterval=3e3,gLastReqTime=0,gMaxStocks=10,gVm=null,gRaiseType={1:"自然涨停",2:"一字涨停",3:"曾涨停",4:"自然跌停",5:"一字跌停",6:"曾跌停"};f_parseType=function(t){return gRaiseType[t]?gRaiseType[t]:"N/A"},f_jumpCode=function(t,e){window.location.href="http://www.treeid/breed_"+t+"#"+e},f_callpc=function(t,a){var e=JSON.stringify({Method:t.Method||"SYS_FUNCData",FuncName:t.FuncName||"",Param:t.Param||""});a=a||function(){},window.TDXQuery({request:e,onSuccess:function(t){a(0,t)},onFailure:function(t,e){a(t,e)}})},f_getTime=function(){f_callpc({Param:"14|1002"},function(t,e){try{(e=1*e.replace(/(\[\[|\]\])/g,""))!=gLastReqTime&&f_getDetail(),gLastReqTime=e}catch(t){}})},f_jump_filter=function(t){var e="http://www.treeid/filtersxzt_"+encodeURIComponent(t);$("#aTreeId").attr("href",e),$("#aTreeId")[0].click()},f_getDetail=function(){f_callpc({Param:"14|1003"},function(t,e){try{for(var a=(e=e.replace(/(\[\[|\]\])/g,"")).split("],["),n=[],r={name:'<span class="min-size">全部统计</span>',data:{total:0,zt:0,kb:0,zt_:"0.0",kb_:"0.0",total2:0}},i=0;i<a.length;i++){a[i]=a[i].split(",");var o=a[i][2];1==o||2==o||3==o?(r.data.total++,1==o||2==o?r.data.zt++:r.data.kb++):4!=o&&5!=o&&6!=o||r.data.total2++;for(var l=0;l<a[i].length;l++)if(a[i][l]=$.trim(a[i][l]),!(l<3)){for(var d=a[i].length,c=l;c<d-4&&!(gVm.$data.inDeep&&2<=c-l);c++){var s=$.trim(a[i][c]);if(0!=s.length){var u={name:s,market:a[i][0],code:a[i][1],type:a[i][2],firstZt:a[i][d-1],bs:a[i][d-2],days:a[i][d-3],codeName:a[i][d-4],nameIndex:c-l};n.push(u)}}break}}0<r.data.total&&(r.data.zt_=parseFloat(1*r.data.zt/r.data.total*100).toFixed(1),r.data.kb_=parseFloat(1*r.data.kb/r.data.total*100).toFixed(1)),gVm.$data.totalStat=r,f_renderTable(n)}catch(t){}})},f_auto_height=function(){setTimeout(function(){for(var t=$(".data-item").not(".hide"),e=0;e<t.length;e++)if(!f_isVisible(t.eq(e))){$("#app_inner").height(t.eq(e).offset().top+1);break}},100)},f_renderTable=function(t){for(var e={},a=0;a<t.length;a++){var n=t[a],r=n.name;null==e[r]&&(e[r]={total:[],zt:[],kb:[],total2:[]}),1==n.type||2==n.type||3==n.type?((n.bsDays=0)<n.days&&(n.bsDays=n.bs/n.days),e[r].total.push(n),1==n.type||2==n.type?e[r].zt.push(n):3==n.type&&e[r].kb.push(n)):4!=n.type&&5!=n.type&&6!=n.type||e[r].total2.push(n)}var i=[];for(var o in e){if(0==e[o].total.length)e[o].zt_="0.0",e[o].kb_="0.0";else{e[o].zt_=parseFloat(1*e[o].zt.length/e[o].total.length*100).toFixed(1),e[o].kb_=parseFloat(1*e[o].kb.length/e[o].total.length*100).toFixed(1),e[o].zt.sort(function(t,e){return e.bs==t.bs?t.days-e.days:e.bs-t.bs});var l=0;e[o].total.map(function(t,e){t.rowIndex=e,l+=t.bsDays,t.bs,t.days}),e[o].totalBsDays=l}gVm.$data.inDeep&&0==e[o].total.length||i.push({name:o,data:e[o],checked:!1})}if(gVm.$data.list=i,gVm.sort(gVm.$data.order_feild,1),gVm.getPicData(),null!=f_make_py&&gVm.$data.list.map(function(t){t.py=f_make_py(t.name)+""}),f_auto_height(),gFirstEnter){gFirstEnter=!1;var d=localStorage.getItem("dxbTabIndex");/^(0|1|2)$/.test(d)&&setTimeout(function(){gVm.click_tab(d)},1)}},f_clear_showmore=function(){$(".tr_folder").remove()},f_send_muti=function(t){var e="http://www.treeid/filtersxzt_"+t;$("#aTreeId").attr("href",e),$("#aTreeId")[0].click()},f_create_tree=function(n,r,i,u,f,t){if(null!=n&&null!=n){var h=d3.linkHorizontal().x(function(t){return t.y}).y(function(t){return t.x}),m=d3.tree().nodeSize([r,i]),p=d3.hierarchy(t);p.x0=i/2,p.y0=0,p.descendants().map(function(t,e){t.id=e,t._children=t.children});var g=d3.create("svg").attr("width",u).attr("height",r).attr("viewBox",[-f.left,-f.top,u,r]).style("user-select","none"),_=g.append("g").attr("fill","none").attr("stroke","#555").attr("stroke-opacity",.4).attr("stroke-width",1.5),v=g.append("g").attr("cursor","default").attr("fill","#999"),y="#fff",x="yellow",b="#fff",w="#fff",k="#eee";"whiteStyle"==gClassName&&(x="#f00",k="#666",w=b=y="#000"),function(a){var t=p.descendants().reverse(),e=p.links();m(p);var n=p,r=p;p.eachBefore(function(t){t.x<n.x&&(n=t),t.x>r.x&&(r=t)});var i=r.x-n.x+f.top+f.bottom,o=g.transition().duration(0).attr("height",i).attr("viewBox",[-f.left,n.x-f.top,u,i]).tween("resize",window.ResizeObserver?null:function(){return function(){return g.dispatch("toggle")}}),l=v.selectAll("g").data(t,function(t){return t.id}),d=l.enter().append("g").attr("transform",function(t){return"translate("+a.y0+","+a.x0+")"}).attr("fill-opacity",0).attr("stroke-opacity",0).on("click",function(t){window.event.clientX<=142&&(0==t.depth?f_jump_filter(t.data.name):0<t.depth&&f_jumpCode(t.data.market,t.data.code))});d.append("rect").attr("y",function(t){return 0==t.depth?-50:-10}).attr("x",function(t){return 0==t.depth?-30:0}).attr("rx",function(t){return 0==t.depth?0:4}).attr("ry",function(t){return 0==t.depth?0:4}).attr("class",function(t){return 0==t.depth?"zhuti":"stock"}).attr("width",function(t){return/(查看)/.test(t.data.name)?68:/(收起)/.test(t.data.name)?38:1==t.depth?$(t.data.name+S(t.data.days+"天"+t.data.bs+"板"),"13","微软雅黑")+80:0==t.depth?0:void 0}).attr("height",function(t){return 0==t.depth?100:20}),d.append("text").attr("y",function(t){return 0==t.depth?t.data.name.length<=3?4:t.data.name.length<=6?-6:-10:5}).attr("x",function(t){return t._children?-6:6}).attr("text-anchor",function(t){return t._children?"end":"start"}).attr("style",T).attr("fill",function(t){return/(查看|收起)/.test(t.data.name)?k:0==t.depth?y:x}).text(function(t){return 0<t.depth?t.data.name:0==t.depth?t.data.name.length<=3?t.data.name:4==t.data.name.length?t.data.name.substr(0,2):t.data.name.substr(0,3):""}).on("click",function(t){z(t)}),d.append("text").attr("y",function(t){return 0==t.depth?-99999:5}).attr("x",function(t){return t._children?-6:$(t.data.name,"13","微软雅黑")+14}).attr("text-anchor",function(t){return t._children?"end":"start"}).attr("style",T).attr("fill",function(t){return 1==t.depth?b:""}).text(function(t){return 0<t.depth?t.data.firstZt?"":t.data.codeName:""}).on("click",function(t){z(t)}),d.append("text").attr("y",function(t){return 0==t.depth?-99999:5}).attr("x",function(t){return t._children?-6:$(t.data.name,"13","微软雅黑")+14}).attr("text-anchor",function(t){return t._children?"end":"start"}).attr("style",T).attr("fill",function(t){return 1==t.depth?x:""}).text(function(t){return 0<t.depth&&t.data.firstZt?t.data.codeName:""}).on("click",function(t){z(t)}),d.append("text").attr("y",function(t){return 0==t.depth?-99999:5}).attr("x",function(t){return t._children?-6:$(t.data.name,"13","微软雅黑")+72}).attr("text-anchor",function(t){return t._children?"end":"start"}).attr("style",T).attr("fill",function(t){return 1==t.depth?w:""}).text(function(t){return 0<t.depth&&!/(查看|收起)/.test(t.data.name)?S(t.data.days+"天"+t.data.bs+"板"):""}).on("click",function(t){z(t)}),d.append("text").attr("y",function(t){return t.data.name.length<=3?-99999:t.data.name.length<=6?12:10}).attr("x",function(t){return-6}).attr("text-anchor",function(t){return t._children?"end":"start"}).attr("style",T).attr("fill",function(t){return 0==t.depth?y:x}).text(function(t){return 0==t.depth&&3<t.data.name.length?4==t.data.name.length?t.data.name.substr(2,2):t.data.name.substr(3,3):""}).on("click",function(t){z(t)}),d.append("text").attr("y",function(t){return 6<t.data.name.length?28:-99999}).attr("x",function(t){return-6}).attr("text-anchor",function(t){return t._children?"end":"start"}).attr("style",T).attr("fill",function(t){return 0==t.depth?y:x}).text(function(t){return 0==t.depth&&6<t.data.name.length?t.data.name.substr(6,2)+"...":""}).on("click",function(t){z(t)}),l.merge(d).transition(o).attr("transform",function(t){return"translate("+t.y+","+t.x+")"}).attr("fill-opacity",1).attr("stroke-opacity",1),l.exit().transition(o).remove().attr("transform",function(t){return"translate("+a.y+","+a.x+")"}).attr("fill-opacity",0).attr("stroke-opacity",0);var c=_.selectAll("path").data(e,function(t){return t.target.id}),s=c.enter().append("path").attr("d",function(t){var e={x:a.x0,y:a.y0};return h({source:e,target:e})});c.merge(s).transition(o).attr("d",h),c.exit().transition(o).remove().attr("d",function(t){var e={x:a.x,y:a.y};return h({source:e,target:e})}),p.eachBefore(function(t){t.x0=t.x,t.y0=t.y})}(p),n.innerHTML="",n.appendChild(g.node())}function $(t,e,a){var n=document.createElement("canvas").getContext("2d");return n.font=e+"px "+a,n.measureText(t).width}function z(t){if(/查看更多/.test(t.data.name)){var e={name:t.parent.data.name,children:t.parent.data.childrenAll.concat({name:"收起"}),childrenAll:t.parent.data.childrenAll};f_create_tree(n,r,i,u,f,e)}else if(/收起/.test(t.data.name)){var a={name:t.parent.data.name,children:t.parent.data.childrenAll.slice(0,gPicMaxTop).concat({name:"查看更多.."}),childrenAll:t.parent.data.childrenAll};f_create_tree(n,r,i,u,f,a),30<t.parent.data.childrenAll.length&&document.getElementById(n.id).scrollIntoView()}}function T(t){return"font-size:13px;"}function S(t){return"1天1板"==t?"首板":t}},gVm=new Vue({el:"#app",computed:{totalStatProxy:function(){if(this.muti_class){var t={name:'<span class="min-size">所选统计</span>',data:{total:0,zt:0,kb:0,zt_:"0.0",kb_:"0.0",total2:0}},e=this.selMutis.split(","),a={},n={},r={},i={},o=0;for(var l in this.list.map(function(t){-1!=e.indexOf(t.name)&&(o++,t.data.total.map(function(t){var e=t.market+t.code;a[e]?a[e]++:a[e]=1}),t.data.zt.map(function(t){var e=t.market+t.code;n[e]?n[e]++:n[e]=1}),t.data.kb.map(function(t){var e=t.market+t.code;r[e]?r[e]++:r[e]=1}),t.data.total2.map(function(t){var e=t.market+t.code;i[e]?i[e]++:i[e]=1}))}),a)a[l]==o&&t.data.total++;for(var l in n)n[l]==o&&t.data.zt++;for(var l in r)r[l]==o&&t.data.kb++;for(var l in i)i[l]==o&&t.data.total2++;return 0<t.data.total&&(t.data.zt_=parseFloat(1*t.data.zt/t.data.total*100).toFixed(1),t.data.kb_=parseFloat(1*t.data.kb/t.data.total*100).toFixed(1)),t}return this.totalStat}},methods:{clickSearch:function(){this.clickSearched=!this.clickSearched},deepFilter:function(){try{window.event.preventDefault()}catch(t){}this.inDeep=!this.inDeep,localStorage.setItem("shortstatInDeep","1"),setTimeout(function(){f_getDetail()},1)},folderPicItem:function(t){t.showSub=!t.showSub,f_jump_filter(t.name)},folderPicAll:function(t){t.showAll=!t.showAll},picJumpCode:function(t){f_jumpCode(t.market,t.code)},focus_search:function(){$(".data-item").removeClass("hide")},gotosearch:function(){var t=this;if(0!=t.filterName.trim().length)try{var e=1*$(".data-item").eq(0).attr("id").replace("tr_","");item=t.list[e],t.showZtDetail(item,e,"tr")}catch(t){}else t.showZtDetail(t.totalStat,"999999","tr")},filterNameFn:function(t){var e=this.filterName.toString().trim();if(""==e)return!0;if(-1!=e.indexOf(" ")){e=e.split(" ");for(var a=0;a<e.length;a++){var n=e[a].trim();if(0<n.length&&(-1!=t.name.indexOf(n)||/^[a-z]+$/i.test(n)&&-1!=t.py.indexOf(n.toUpperCase())))return!0}}else if(-1!=t.name.toLowerCase().indexOf(e)||/^[a-z]+$/i.test(e)&&-1!=t.py.indexOf(e.toUpperCase()))return!0;return!1},sendMutiClass:function(t){var e=this,a=[];e.selMutis="",e.list.map(function(t){t.checked&&a.push(t.name)}),e.selMutis=a.join(","),f_auto_height(),0<e.selMutis.length&&f_send_muti(e.selMutis)},showZtDetail:function(t,e,a){if(this.muti_class){if(0<this.selMutis.length&&!t.checked&&this.selMutis.split(",").length>=gAllowMaxSel)return;return t.checked=!t.checked,void this.sendMutiClass(t)}this.selectedItemKey=a+"_"+t.name;var n="999999"==e?"":t.name;f_jump_filter(n)},parseZero:function(t){return 0==t?"":t},sort:function(a,t,e){$(".data-item").removeClass("hide");window.event;var n=this;t=t||0,e=e||0,f_clear_showmore(e);var r,i=null;i=n.list,0==t&&(n.order_flag=!n.order_flag,a!=n.order_feild&&(n.order_flag=1)),r=n.order_flag,n.order_feild=a,i.sort(function(t,e){return"name"==a?r?e.name>t.name:t.name>e.name:"total"==a?r?e.data.total.length-t.data.total.length:t.data.total.length-e.data.total.length:"zt"==a?r?e.data.zt.length-t.data.zt.length:t.data.zt.length-e.data.zt.length:"kb"==a?r?e.data.kb.length-t.data.kb.length:t.data.kb.length-e.data.kb.length:"zt_"==a?r?e.data.zt_-t.data.zt_:t.data.zt_-e.data.zt_:"kb_"==a?r?e.data.kb_-t.data.kb_:t.data.kb_-e.data.kb_:"total2"==a?r?e.data.total2.length-t.data.total2.length:t.data.total2.length-e.data.total2.length:void 0}),gVm.$data.list=i},itemNameStyle:function(t){return t.name.length<=5?"":5<t.name.length?"font-size:12px;":void 0},click_tab:function(t){if(this.tabIndex=t,localStorage.setItem("dxbTabIndex",t),this.muti_class=1==t,f_jump_filter(""),0==t||1==t){try{$(".tr-total")[0].click()}catch(t){}this.list.map(function(t){t.checked=!1}),this.selMutis="";try{window.event.target.checked||setTimeout(function(){try{$(".tr-total")[0].click()}catch(t){}},1)}catch(t){}}else{var a=this;setTimeout(function(){f_drag_scroll(),$("#pic_view").animate({scrollTop:0},"fast");var e=[];a.list.map(function(t){if(0!=t.data.total.length){var n={};n.name=t.name,n.children=[],n.childrenAll=[],n.totalBsDays=t.data.totalBsDays,t.data.zt.map(function(t,e){if(!(0==t.days||0==t.bs||t.nameIndex>=gZhutiSlice)){var a={name:t.code,value:"",market:t.market,code:t.code,codeName:t.codeName,days:t.days,bs:t.bs,firstZt:/^925.*/.test(t.firstZt)};n.childrenAll.push(a)}}),n.children=n.childrenAll.slice(0,gPicMaxTop),n.childrenAll.length>gPicMaxTop&&(n.children=n.children.concat({name:"查看更多.."})),0<n.childrenAll.length&&e.push(n)}}),e.sort(function(t,e){return e.childrenAll.length-t.childrenAll.length}),$("#pic_view").html("").dblclick(function(){$(this).animate({scrollTop:0},"fast")});var r=24,i=25,o=282,l={top:15,right:20,bottom:15,left:50};e.map(function(t,e){if(0!=t.children.length){var a="tree_"+e;$("#pic_view").append('<div id="'+a+'"></div>');var n=JSON.parse(JSON.stringify(l));1==t.childrenAll.length&&(n.top=20,n.bottom=20),6<t.name.length&&(n.top=35,n.bottom=35),f_create_tree(document.getElementById(a),r,i,o,n,t)}})})}},getPicData:function(){}},data:{list:[],order_feild:"total",order_flag:1,totalStat:null,filterName:"",selectedItemKey:"",muti_class:!1,selMutis:"",showSelTips:!1,tabIndex:0,picData:[],gMaxStocks:gMaxStocks,inDeep:!1,showDeepTips:!1,clickSearched:!1},mounted:function(){var t=this;$("#muti_class").mouseover(function(){this.offsetWidth<this.scrollWidth&&(t.showSelTips=!0)}).mouseout(function(){t.showSelTips=!1});var e=localStorage.getItem("dxbTabIndex");/^(0|1|2)$/.test(e)&&(t.tabIndex=e)}}),f_disable_mouse_scroll=function(){document.onmousewheel=function(){return!1}},f_drag_scroll=function(){var r=document.getElementById("pic_view");r&&(r.onmousedown=function(t){var a=(t=t||window.event).clientY,n=r.scrollTop;this.setCapture&&this.setCapture(),r.onmousemove=function(t){t=t||window.event;var e=n+a-t.clientY;r.scrollTop=e},r.onmouseup=function(t){r.onmousemove=null,this.releaseCapture&&this.releaseCapture()}})},f_set_drag_tip=function(){$("body").bind("mouseover",function(){$("#app").height()>$(window).height()?($(".tsinfo").show(),$("body").bind("click",function(){$(this).unbind(),$(".tsinfo").hide()})):$(".tsinfo").hide()})},f_resize=function(){var t=$(window).height();$("#app,#app_inner").height(t),$("#pic_view").height(t-20)},$(function(){/^1$/.test(localStorage.getItem("shortstatInDeep"))?gVm.$data.inDeep=!0:localStorage.removeItem("shortstatInDeep"),f_getTime(),setTimeout(function(){f_getTime()},1e3),setTimeout(function(){f_getTime()},2e3),setInterval(function(){f_getTime()},gInterval),window.OnNewPxLimitData=function(){f_getTime()},f_resize(),window.onresize=function(){f_resize(),f_auto_height()},f_isVisible=function(t){var e,a=(e="object"==typeof t?t:$(t)).offset(),n=$(window),r=n.scrollTop();return!(r>a.top+e.outerHeight()||r+n.height()-15<a.top)},document.getElementById("app").onmousewheel=function(t){if(0!=$(".data-item").length){var e=(t=t||window.event).wheelDelta;if(t.preventDefault(),0<e)$(".data-item.hide:last").removeClass("hide");else{if(f_isVisible(".data-item:last"))return;var a=$(".data-item").not(".hide");2<=a.length?a.eq(0).addClass("hide"):$(".data-item").removeClass("hide")}}}})</script></body></html>