var f10main={style:"black",ispc:"1",functype:""};function getLocal(b){if(window.localStorage){return unescape(window.localStorage[b]||"")||""}else{var a,c=new RegExp("(^| )"+name+"=([^;]*)(;|$)");if(a=document.cookie.match(c)){return unescape(a[2])}else{return null}}return""}function setLocal(a,b){if(window.localStorage){window.localStorage[a]=escape(b)}else{document.cookie=name+"="+escape(b)}}f10main.style=getLocal("style")||"black";if(window.location.href.indexOf("http")==0){f10main.ispc=0}(function(){var e=window.document.location.pathname;if(e.indexOf("tdxf11_gg")>0){f10main.functype="0"}else{if(e.indexOf("tdxf11_zs")>0){f10main.functype="1"}else{return}}var c=getLocal("style");if(c&&c.length){f10main.style=c}var d=window.location.href.split("?")[1];if(typeof d!=="undefined"){var a=d.split("&");for(var b=0;b<a.length;b++){f10main[a[b].split("=")[0]]=a[b].split("=")[1]}}})();function changeStyle(a){if(a!="white"&&a!="black"){return}f10main.style=a;setLocal("style",a);if(a=="black"){if(!$("body").hasClass("txblack")){$("body").addClass("txblack")}$("body").removeClass("txwhite")}else{if(a=="white"){if(!$("body").hasClass("txwhite")){$("body").addClass("txwhite")}$("body").removeClass("txblack")}}}function jumpFuncName(d){var c=$("#container a");var g=$("#code").text();var b=false;c.each(function(){if($(this).attr("value")==d.name){b=true;c.removeClass("selfunc");$(this).addClass("selfunc")}});if(b){if(f10main.functype=="1"){setLocal("zsfenture",d.name)}else{if(f10main.functype=="2"){setLocal("bgfenture",d.name)}else{setLocal("ggfenture",d.name)}}var f=[];for(var e in d){if(e!="name"){f.push(e+"="+d[e])}}var a=f.join("&");if(f10main.functype=="1"){if(a.length){document.getElementById("tdxf10").src=f10main.path+d.name+".html?style="+f10main.style+"&ispc="+f10main.ispc+"&urlpath="+f10main.path+"&"+a+"&"+getRnd()}else{document.getElementById("tdxf10").src=f10main.path+d.name+".html?style="+f10main.style+"&ispc="+f10main.ispc+"&urlpath="+f10main.path+"&"+getRnd()}}else{if(f10main.functype=="2"){if(a.length){document.getElementById("tdxf10").src=f10main.path+d.name+"_b.html?vertype="+f10main.vertype+"&style="+f10main.style+"&gp="+g+"&ispc="+f10main.ispc+"&urlpath="+f10main.path+"&"+a+"&"+getRnd()}else{document.getElementById("tdxf10").src=f10main.path+d.name+"_b.html?vertype="+f10main.vertype+"&style="+f10main.style+"&gp="+g+"&ispc="+f10main.ispc+"&urlpath="+f10main.path+"&"+getRnd()}}else{if(a.length){document.getElementById("tdxf10").src=f10main.path+d.name+".html?vertype="+f10main.vertype+"&style="+f10main.style+"&gp="+g+"&ispc="+f10main.ispc+"&urlpath="+f10main.path+"&"+a+"&"+getRnd()}else{document.getElementById("tdxf10").src=f10main.path+d.name+".html?vertype="+f10main.vertype+"&style="+f10main.style+"&gp="+g+"&ispc="+f10main.ispc+"&urlpath="+f10main.path+"&"+getRnd()}}}}}function readCfg(c){if(f10main.ispc=="1"){$.ajax({type:"GET",url:"tdxf11_cfg.xml",dataType:"xml",cache:false,error:function(){},success:function(f){var d=$(f).find("address");var e=$(d).find("url").text();var g="site/tdxf10";c(e+"/"+g+"/")}})}else{var a=window.location.href;var b=a.substring(0,a.lastIndexOf("/")+1);c(b)}}function setGp(){var e=true;if(f10main.gp&&f10main.gp.length){$("#code").text(f10main.gp);if(f10main.name&&f10main.name.length){e=false;$("#name").text(f10main.gp+" "+decodeURI(f10main.name))}else{$("#name").text(f10main.gp)}}var b=$.trim($("#code").text());if(f10main.ispc=="1"){$("#btn").css("display","");$("#gpname .close").css("display","");var c=$("#name").text();var a=$.trim(c.replace(b,""));if(!a||a.length==0){$("#gpname .gpclr").css("text-align","center")}$("#gpname .gpclr .nmclr").text(a);$("#gpname .gpclr .cdclr").text(b)}else{$(".gginfo").css("height","50px");$("#gpname .close").css("display","none");if(!f10main.gp||f10main.gp.length==0){$("#code").text("601398");b="601398"}if(!e){var c=$("#name").text();var a=$.trim(c.replace(b,""));$("#gpname .gpclr .nmclr").text(a);$("#gpname .gpclr .cdclr").text(b)}else{CallTQL(d,"tdxf10_gg_comreq",["gpquery",b]);function d(g){try{g=FormatResult(g,1)}catch(h){f();return}if(g.ErrorCode!=0){f();return}else{if(g.tables==undefined){g.tables=[]}if(g.tables.length!=1){f();return}$("#gpname .gpclr .nmclr").text(g.tables[0].rows[0]["T003"]);$("#gpname .gpclr .cdclr").text(g.tables[0].rows[0]["T002"])}function f(){$("#gpname .gpclr .cdclr").text(b)}}}}}function setevent(c){var a=$("#container a");var b=f10main.functype=="1"?"":$("#code").text();a.click(function(){a.removeClass("selfunc");$(this).addClass("selfunc");var d=$(this).attr("value");if(f10main.functype=="1"){setLocal("zsfenture",d)}else{if(f10main.functype=="2"){setLocal("bgfenture",d);if(f10main.functype=="2"){d=d+"_b"}}else{setLocal("ggfenture",d)}}document.getElementById("tdxf10").src=c+d+".html?"+getUrlP()}).mouseenter(function(){$(this).toggleClass("hover")}).mouseleave(function(){$(this).toggleClass("hover")});if(f10main.ispc=="1"){$("#close").bind("click",function(){window.open("http://www.treeid/closemyview","_parent")});$("#btn .tdxup,#btn .tdxdown").mouseenter(function(){$(this).toggleClass("hover")}).mouseleave(function(){$(this).toggleClass("hover")})}}function getRnd(){return parseInt(Math.random()*10000)+"="+parseInt(Math.random()*10000)}function getUrlP(){var b="";if(f10main.functype=="1"){b="style="+f10main.style+"&ispc="+f10main.ispc}else{if(f10main.functype=="2"){var a=$("#code").text();b="vertype="+f10main.vertype+"&style="+f10main.style+"&gp="+a+"&ispc="+f10main.ispc}else{var a=$("#code").text();b="vertype="+f10main.vertype+"&style="+f10main.style+"&gp="+a+"&ispc="+f10main.ispc}}if(f10main.more){b+="&more="+f10main.more}if(f10main.param1){b+="&param1="+f10main.param1}b+="&"+getRnd();return b}$(document).ready(function(){changeStyle(f10main.style||"black");var a=$("#vertype").text()||"0";f10main.vertype=$("#vertype").text()||"0";if(f10main.functype=="0"){setGp();var c=$("#code").text();if(c.length){var b=c.substring(0,2);if(b=="20"||b=="90"){f10main.functype="2"}}}else{if(f10main.ispc=="1"){$("#close").css("display","")}else{$("#close").css("display","none")}}$("#wyfk").bind("click",function(){if(f10main.ispc=="1"){window.open("http://www.treeid/dlghttp://soft.tdx.com.cn:8088/feedback.html?feedtype=3&clientname=##client_name##&clientver=##client_ver##","_parent")}else{window.open("http://soft.tdx.com.cn:8088/feedback.html?feedtype=3","_blank")}});readCfg(function(f){var e;if(f10main.functype=="1"){e=getLocal("zsfenture")||"zs_tzrl"}else{if(f10main.functype=="2"){e=getLocal("bgfenture")||"gg_zxts"}else{e=getLocal("ggfenture")||"gg_zxts"}}f10main.path=f;if((typeof f10main.feature!=="undefined")&&f10main.feature.length!=0){e=f10main.feature}setevent(f);if(!e){if(f10main.functype=="1"){e="zs_tzrl"}else{if(f10main.functype=="2"){e="gg_zxts"}else{e="gg_zxts"}}}var d=$("#container a");d.removeClass("selfunc");d.each(function(){var g=$(this).attr("value");if(g==e){$(this).addClass("selfunc")}});document.getElementById("tdxf10").src=f+e+".html?"+getUrlP()})});